language: python
framework: django
hasDockerfile: false
build:
  baseImage: python:3.9
  osPackageInstallCommand: null
  applicationDependencyPath: requirements.txt
  applicationPackageInstallCommand: pip install -r requirements.txt
  applicationBuildCommand: null
  applicationRunCommand: python manage.py migrate && python manage.py runserver 0.0.0.0:8080
env:
  - name: PYTHONUNBUFFERED
    value: "1"
  - name: DEBUG
    value: "True"
    build_time: true
  - name: UNBUF_DEBUG
    value: "abcd_{{DEBUG}}"
    build_time: true
    derived: true
ports:
  - 8080
run:
  replicas: 1
  cpu: 100m
  memory: 100Mi
resources:
  - name: cache
    type: redis
    port: 6379
  - name: database
    type: postgres
    username: postgres
    password: postgres
    port: 5432
  - name: message-queue
    type: sqs
    params:
      visibilityTimeout: 600
  - name: photos
    type: s3